{% extends 'hub/base.html' %}
{% load static %}
{% block header %}
    <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'style.css' %}" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:700, 400|Montserrat:400, 700|Nunito+Sans:800, 400&display=swap" rel="stylesheet">
    <title>DIY Hub</title>
{% endblock %}
{% block content %}
    <div class="selector">
	  <h2>Select Parts:</h2>
		 
        <form action="/components.html">
			<input type="text" id="searchbar" placeholder="Search for parts..">
			<div class="items-container">
                {% for category in categories %}
                    <div class="category">
                        <label class="category-label"><input class="toggle" type="checkbox">{{ category.name }} <i class="fa fa-caret-down"></i></label>
                        <div class="partContainer notExpanded">
                            <ul>
                                {% for part in category.parts %}
                                <li>
                                    <label for="one" class="container">{{ part.name }}
                                        <input id="one" type="checkbox" name="">
                                        <span class="checkmark"></span>
                                    </label>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
				    </div>
                {% endfor %}
			</div>
      </form>
</div>
	
	
	

  
  {% if projects %}
      <div class="grid">
  {% for project in projects %}
      <a href="project/{{ project.url }}">
      <div class="module">
	  <div class="container-grid">
          <img src="{% static '' %}{{ project.imgPath }}" alt="ProjectImage">
          <div class="overlay">
              <h1>{{ project.name }}</h1>
              <p>{{ project.desc | safe }}</p>
          </div>
	  </div>
    </div>
      </a>
  {% endfor %}
      </div>
    {% endif %}
	
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script>
	(function($){
  $("#searchbar").on('keyup', function(e) {
    var $this = $(this);
    var exp = new RegExp($this.val(), 'i');
    $(".items-container li label").each(function() {
      var $self = $(this);
      if(!exp.test($self.text())) {
        $self.parent().hide();
        $self.parent().parent().parent().removeClass("expand").addClass("notExpanded");

      } else {
          $self.parent().parent().parent().removeClass("notExpanded").addClass("expand");
        $self.parent().show();
      }
    });
  });
})(jQuery);
	</script>
{% endblock %}
